@import models.user.User
@(church: Church = null, user: User)
<div id="fb-root"></div>
<script>(function (d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;
    js = d.createElement(s);js.id = id;js.src = '//connect.facebook.net/pl_PL/sdk.js#xfbml=1&version=v2.4&appId=475989659250668';
    fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script>
<script>!function (d, s, id) {var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
    if (!d.getElementById(id)) {js = d.createElement(s);js.id = id;js.src = p + '://platform.twitter.com/widgets.js';
        fjs.parentNode.insertBefore(js, fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="passport">
    <nav id="passportmenu-top" class="ui secondary pointing menu blurred">
        @parts.social_bands()
    </nav>
    @*<table class="passport-title-wrapper">*@
    @*<tr><td class="church-name" data-field="name"></td> <td class="church-name-edit-icon"><div class="passport-value-edit-icon"></div></td></tr>*@
    @*</table>*@
    <div class="passport-title-wrapper church-name"></div>

    @parts.passport.gallery()

    @parts.passport.datatable()

    @parts.mediacontent_thumbs()

    <div class="passport-update">
        <div class="ui top attached tabular menu">
            <a class="item active story-menu-item" data-tab="add-story">Dodawanie wspominienia</a>
            <a class="item image-menu-item" data-tab="add-images">Dodawanie zdjęć</a>
        </div>
        <div class="passport-update-message-wrapper">
            <div class="pointy passport-update-message" id="new-story-success-message">
                <div class="message-icon"></div>
                <div class="message-header">Twoj element został wysłany!</div>
                <div class="message-text">Odpowiemy Ci w ciągu 24 godzin</div>
            </div>
            <div class="pointy passport-update-message" id="new-story-error-message">
                <div class="message-icon"></div>
                <div class="message-header">Something happened!</div>
                <div class="message-text"></div>
            </div>
        </div>
        <div data-tab="add-story" class="ui tab active">
            @parts.passport.common_update_head(user, true)
            <!-- add story form -->
        <form action="@routes.Churches.addStory()" method="POST" class="ui form entity-form" data-entity="story">
            <input type="hidden" value="" name="church" id="story-church-id">
            <div class="col-3 rightaligned inlinemiddle">
                <label for="story-title">Tytuł wspomnienia</label>
            </div>
            <div class="col-4">
                <input type="text" class="ui input" id="story-title" name="title" placeholder="Wybierz chwytliwy tytuł dla opowiadanej przez siebie historii">
            </div>
            <div class="col-1"></div>
            <div class="gapper-less clearfix"></div>
            <div class="col-3 rightaligned inlinemiddle">
                <label for="story-year">Rok</label>
            </div>
            <div class="col-4">
                <input type="text" class="ui input" id="story-year" name="year" placeholder="Spróbuj przypomnieć sobie, kiedy dokładnie się to zdarzyło">
            </div>
            <div class="col-1"></div>
            <div class="gapper-less clearfix"></div>
            <div class="col-3 rightaligned inlinemiddle">
                <label for="story-text">TreŚĆ historii</label>
            </div>
            <div class="col-4 fullheight">
                <textarea class="ui textarea" id="story-text" name="text" placeholder="Projektował kościół?  Pomagałeś przy budowie, znasz fakty, o których nikt już nie pamięta? A może ktoś z Twojej rodziny ma historię do opowiedzenia? Opisz ze szczegółami swoje wspomnienie."></textarea>
            </div>
            <div class="col-1"></div>
            <input type="hidden" value="" name="cover" id="story-cover-id">
        </form>
            @parts.passport.common_update_tail(false)
        </div>

        <div data-tab="add-images" class="ui tab">
            @parts.passport.common_update_head(user, false)
            <!-- images form -->
        <form class="ui form entity-form" data-entity="images" method="POST" action="@routes.Churches.addImages()">
            <input type="hidden" value="" name="church" id="photo-church-id">
            <div class="col-3 rightaligned inlinemiddle">
                <label for="authored-by">Autor zdjęć</label>
            </div>
            @if(user != null) {
                <div class="col-1"><div class="you-button form-button">To ty?</div></div>
                <div class="col-3">
                    <input type="text" class="ui input" id="authored-by" name="author.name" placeholder="Imię i nazwisko">
                </div>
            } else {
                <div class="col-4">
                    <input type="text" class="ui input" id="authored-by" name="author.name" placeholder="Imię i nazwisko">
                </div>
            }
            <div class="gapper-less clearfix"></div>
            <div class="col-3 rightaligned inlinemiddle">
                <label for="photo">Zdjęć</label>
            </div>
            <div class="col-4">
                <div class="ui action input">
                    <input type="text" id="_attachmentName">
                    <label for="attachmentName" class="ui icon button btn-file">
                        <i class="attach big icon"></i>
                        <input type="file" id="attachmentName" name="attachmentName" style="display: none">
                    </label>
                </div>
            </div>

            <div class="gapper-less clearfix"></div>
            <div class="col-3 rightaligned inlinemiddle">
                <label for="photo-description">Opis zdjęć</label>
            </div>
            <div class="col-4">
                <input type="text" class="ui input" id="photo-description" name="description" placeholder="Opis">
            </div>
        </form>
            @parts.passport.common_update_tail(true)
        </div>
    </div>

    <div class="passport-suggest">
        <div class="passport-update-message-wrapper">
            <div class="pointy passport-update-message" id="suggestion-success-message">
                <div class="message-icon"></div>
                <div class="message-header">Twoj element został wysłany!</div>
                <div class="message-text">Odpowiemy Ci w ciągu 24 godzin</div>
            </div>
            <div class="pointy passport-update-message" id="suggestion-error-message">
                <div class="message-icon"></div>
                <div class="message-header">Something happened!</div>
                <div class="message-text"></div>
            </div>
        </div>
        @parts.passport.suggest_form()
    </div>

    <nav id="passportmenu-bottom" class="ui secondary pointing menu blurred">
        @parts.social_bands()
    </nav>

</div>
